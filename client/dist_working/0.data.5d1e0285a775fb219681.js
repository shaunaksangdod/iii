webpackJsonp([0],{213:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("DataViewer"),t=[],a=[],n=e.querySelectorAll("#mapSVG");n.forEach(function(e){var n=e.parentNode,i=e.innerHTML;console.log(e.width.baseVal.value,e.height.baseVal.value);var l=new Image,s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+e.width.baseVal.value+'" height="'+e.height.baseVal.value+'">';l.src="data:image/svg+xml,"+escape(s+i+"</svg>"),n.appendChild(l),e.style.display="none",document.getElementById("toolTipDiv").style.display="none",t.push(l),a.push(e),l.onload=function(){l.onload=function(){};var e=document.createElement("canvas");console.log("lading ",l.width,l.height),e.width=l.width,e.height=l.height;var t=e.getContext("2d");t.drawImage(l,0,0),l.src=e.toDataURL()}});window.scrollTo(0,0),(0,O.default)(e,{allowTaint:!0,onrendered:function(n){
//! MAKE YOUR PDF
var i=new jsPDF("p","pt","letter"),l=1.2*e.clientWidth,s=1400;console.log("export",e.clientHeight," > ",s);for(var o=0;o<=e.clientHeight/s;o++){
//! This is all just html2canvas stuff
var r=n,c=0,d=s*o,u=l,f=s,v=0,m=0,g=l,p=s;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",l),onePageCanvas.setAttribute("height",s);var y=onePageCanvas.getContext("2d");y.drawImage(r,c,d,u,f,v,m,g,p);var h=onePageCanvas.toDataURL("image/png",1),E=onePageCanvas.width,b=onePageCanvas.clientHeight;
//! If we're on anything other than the first page,
o>0&&i.addPage(612,791),
//! now we declare that we're working on that page
i.setPage(o+1),
//! now we add content to that page!
i.addImage(h,"PNG",10,10,E*(700/E),.32*b)}
//! after the for loop is finished running, we save the pdf.
i.save("immigration_index.pdf"),a.forEach(function(e){e.style.display="block"}),t.forEach(function(e){e.style.display="none"}),document.getElementById("toolTipDiv").style.display="block"}})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(18),o=i(s),r=a(7),c=i(r),d=a(8),u=i(d),f=a(9),v=i(f),m=a(11),g=i(m),p=a(10),y=i(p),h=a(1),E=i(h),b=a(23),A=n(b),w=a(37),C=n(w),k=a(35),N=a(21),R=a(234),_=a(51),P=i(_),L=a(52),x=i(L),B=a(50),F=(i(B),a(61)),T=i(F),D=a(60),O=i(D);a(58);var S={Overall:{name:"Overall",desc:"Aggregated score for all categories.",type:"activeCategory"},"Full Time":{name:"Full-Time Employment",desc:"Percentage of full time workers who were employed full time during the last 12 months (25-64 years old)",type:"activeCategory"},Poverty:{name:"Poverty",desc:"Percentage of residents whose household income fell below 150% of federal poverty line (25-64 years old)",type:"activeCategory"},"Working Poor":{name:"Working Poor",desc:"Percentage of full time workers with income to poverty ratio lower than or equal to 150% of federal poverty line (25-64 years old)",type:"activeCategory"},Homeownership:{name:"Homeownership",desc:"Percentage of residents who own their own homes (25-64 years old)",type:"activeCategory"},"Rent Burden":{name:"Rent Burden",desc:"Percentage of residents who spent 50% or more of their income on rent. (25-64 years old)",type:"activeCategory"},Unemployment:{name:"Unemployment",desc:"Percentage of workers who are unemployed (25-64 years old)",type:"activeCategory"},Income:{name:"Income Level for Full-Time Workers",desc:"Income level of full time workers during the last 12 months (25-64 years old)",type:"activeCategory"}},G=["Ratio","Rank","Grade"],H={babs:{name:"Bachelor’s Degree or More",desc:"Holds Bachelor’s degree or better; speaks English well.",type:"educationLevel",subcats:S},hs:{name:"High School Diploma / Some College",desc:"Has High School diploma or some college; speaks English well.",type:"educationLevel",subcats:S}},M={nativity:{name:"The Effects of Nativity Status",info:"Effects of nativity status on economic outcomes of foreign-Born New Yorkers.",type:"activeAnalysis",url:"/data/2016/nativity",subcats:{nativity:{name:"Foreign-Born and Native-Born",type:"activeAnalysis",subcats:H},nativity_women:{name:"Foreign-Born Women and Native-Born Women",type:"activeAnalysis",subcats:H}}},race:{name:"The Effects of Race",info:"Effects of nativity status and race on economic outcomes of foreign-born New Yorkers.",url:"/data/2016/race",subcats:{race:{name:"Foreign-Born people of color and Native-Born non-hispanic white",type:"activeAnalysis",subcats:H},race_women:{name:"Foreign-Born Women of color and Native-born non-hispanic white women",type:"activeAnalysis",subcats:H}}},gender:{name:"The Effects of Gender",info:"Effects of nativity status on economic outcomes of foreign-born women.",heading:"Foreign Born Women and Foreign Born Men",url:"/data/2016/gender",subcats:H},vulnerable:{name:"The Effects of Low English Proficiency and Educational Attainment",info:"Measures economic outcomes for the foreign-born with no high school diploma and low English proficiency.",heading:"Foreign-born with no high school diploma and low English proficiency",url:"/data/2016/vulnerable",subcats:S}},j=["rgb(5,48,97)","rgb(33,102,172)","rgb(67,147,195)","rgb(146,197,222)","rgb(209,229,240)","rgb(253,219,199)","rgb(244,165,130)","rgb(214,96,77)","rgb(178,24,43)","rgb(103,0,31)"],I=A.scaleOrdinal().domain(["A","A-","B","B-","C","C-","D","D-","E"]).range(j),W=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.setActiveYear=function(e){},a.state={puma_data:[],activeCategory:(0,o.default)(S)[0],activeAnalysis:a.props.params.type||"nativity",activeYear:"2016",educationLevel:"babs",activeRegions:null,geoData:null,childGeo:null,regionGeo:null,display:"map"},a.setActiveCategory=a.setActiveCategory.bind(a),a.setActiveAnalysis=a.setActiveAnalysis.bind(a),a.setActiveYear=a.setActiveYear.bind(a),a.educationClick=a.educationClick.bind(a),a.mapClick=a.mapClick.bind(a),a.renderLegend=a.renderLegend.bind(a),a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.json("/womeningov/iii/geo/ny_puma_geo.json",function(t,a){console.log("geodata"),t&&console.log("error",t);var n={type:"FeatureCollection",features:[]};n.features=(0,o.default)(T.default).map(function(e){return{type:"Feature",properties:{region:e,geoType:"region"},geometry:C.merge(a,a.objects.collection.geometries.filter(function(t){return T.default[e].indexOf(t.properties.NAMELSAD10)!==-1}))}}),e.setState({geoData:a,childGeo:C.feature(a,a.objects.collection),regionGeo:n})})}},{key:"componentWillReceiveProps",value:function(e){e.params.type&&e.params.type!==this.state.activeAnalysis&&this.setState({activeAnalysis:e.params.type})}},{key:"numberFormat",value:function(e){return e&&e.indexOf("#")===-1?e.indexOf("%")!==-1?e:(+e).toFixed(2):"N/A"}},{key:"gradeFormat",value:function(e){return e&&e.indexOf("#")===-1?e:"N/A"}},{key:"dataTable",value:function(){var e=this;if(!this.props.analyses_2016[this.state.activeAnalysis]||!this.props.analyses_2016[this.state.activeAnalysis][this.state.educationLevel])return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,this.state.activeYear),E.default.createElement("span",null);var t=this.props.analyses_2016[this.state.activeAnalysis][this.state.educationLevel],a=this.state.activeRegion&&T.default[this.state.activeRegion]?T.default[this.state.activeRegion]:(0,o.default)(T.default),n=(0,o.default)(t).filter(function(e){return a.indexOf(e)!==-1}).sort(function(a,n){return t[a][e.state.activeCategory].Rank-t[n][e.state.activeCategory].Rank}).map(function(a,n){return E.default.createElement("tr",{key:a},E.default.createElement("td",null,a),"Overall"===e.state.activeCategory?null:E.default.createElement("td",null,e.numberFormat(t[a][e.state.activeCategory].Ratio)),E.default.createElement("td",null,e.state.activeRegion?t[a][e.state.activeCategory].Rank:"N/A"==e.gradeFormat(t[a][e.state.activeCategory].Grade)?"N/A":n+1),E.default.createElement("td",null,e.gradeFormat(t[a][e.state.activeCategory].Grade)))});return E.default.createElement("div",{style:{padding:10}},E.default.createElement("div",{className:"col-md-12",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic"):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading):E.default.createElement("strong",null,M[this.state.activeAnalysis]?M[this.state.activeAnalysis].heading:""),"vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null," | "," ",E.default.createElement("strong",null,H[this.state.educationLevel].name)," | "+H[this.state.educationLevel].desc):""),E.default.createElement("table",{className:"table table-hover",style:{backgroundColor:"#fff",marginTop:40}},E.default.createElement("thead",null,E.default.createElement("tr",null,E.default.createElement("th",null,"Region"),G.filter(function(t){return!("Overall"===e.state.activeCategory&&"Ratio"===t)}).map(function(e){return E.default.createElement("th",{key:e},e)}))),E.default.createElement("tbody",null,n)))}},{key:"educationClick",value:function(e){e!==this.state.educationLevel&&this.setState({display:e})}},{key:"renderLegend",value:function(e){var t=this,a=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{backgroundColor:e(t),width:100/e.domain().length+"%",height:20}})}),n=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{textAlign:"center",width:100/e.domain().length+"%",height:20}},t)});(0,o.default)(S).map(function(e){var a=e===t.state.activeCategory?"catbutton active":"catbutton";return E.default.createElement("div",{className:"catDiv",key:e},E.default.createElement("div",{onClick:t.setActiveCategory.bind(null,e)},E.default.createElement("div",{className:a},E.default.createElement("p",{className:"catContent"},e))))});return E.default.createElement("div",{className:"legendContainer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-5",style:{backgroundColor:"#efefef",minHeight:171,borderRadius:5,padding:10}},E.default.createElement("h5",null,S[this.state.activeCategory].name,E.default.createElement("span",{style:{float:"right"}},this.state.activeRegion)),E.default.createElement("br",null),E.default.createElement("div",{style:{marginTop:-15}},E.default.createElement("div",{className:"legendRow"},a),E.default.createElement("div",{className:"legendRow"},n)),S[this.state.activeCategory].desc),E.default.createElement("div",{className:"col-md-1"}),E.default.createElement("div",{className:"col-md-6",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic",E.default.createElement("br",null)):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"",M[this.state.activeAnalysis]&&M[this.state.activeAnalysis].heading?E.default.createElement("strong",null,M[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"","vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null,E.default.createElement("strong",null,H[this.state.educationLevel].name,E.default.createElement("br",null)),H[this.state.educationLevel].desc):"")))}},{key:"renderMapTableButtons",value:function(){var e="catbutton";e+="map"===this.state.display?" active":"";var t="catbutton";return t+="table"===this.state.display?" active":"",E.default.createElement("div",{className:"catButtons",style:{float:"right"}},E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"map")},E.default.createElement("div",{className:e},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Map")))),E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"table")},E.default.createElement("div",{className:t},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Table")))))}},{key:"mapClick",value:function(e){var t=null;A.selectAll(".mapActive").classed("mapActive",!1),this.state.activeRegion===e.properties.region?(t=null,A.selectAll(".mapActive").classed("mapActive",!1)):"region"===e.properties.geoType&&(t=e.properties.region,A.selectAll(".region").sort(function(e){return e.properties.region===t?1:0}),A.select("."+e.properties.region.split(" ").join("_")).classed("mapActive",!0)),this.setState({activeRegion:t})}},{key:"renderMap",value:function(){var e=this;if(1===window.x&&(window.x=2,this.props.router.push("/womeningov/iii/data/2016/"+this.state.activeAnalysis)),!(this.props.analyses_2016[this.state.activeAnalysis]&&this.props.analyses_2016[this.state.activeAnalysis][this.state.educationLevel]&&this.state.childGeo&&this.state.regionGeo&&null!=this.props.analyses_2016))return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,"2016"),E.default.createElement("div",{style:{minHeight:"100vh"}}," Loading ... ",(0,o.default)(this.props.analyses_2016));var t=this.props.analyses_2016[this.state.activeAnalysis][this.state.educationLevel],a={type:"FeatureCollection",features:[]};a.features=this.state.regionGeo.features.sort(function(a,n){return t[a.properties.region][e.state.activeCategory].Rank-t[n.properties.region][e.state.activeCategory].Rank}).map(function(a,n){var i=t[a.properties.region]&&t[a.properties.region][e.state.activeCategory]&&t[a.properties.region][e.state.activeCategory].Grade?t[a.properties.region][e.state.activeCategory].Grade:"E";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank="N/A"==e.gradeFormat(i)?"N/A":n+1,a});var n={type:"FeatureCollection",features:[]};return this.state.activeRegion&&(n.features=this.state.childGeo.features.filter(function(t){return T.default[e.state.activeRegion]&&T.default[e.state.activeRegion].includes(t.properties.NAMELSAD10)}).map(function(a){var n=a.properties.NAMELSAD10,i=t[n]&&t[n][e.state.activeCategory]&&t[n][e.state.activeCategory].Grade?t[n][e.state.activeCategory].Grade:"E-";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank=t[n][e.state.activeCategory].Rank,a.properties.geoType="puma",a.properties.region=n,a})),E.default.createElement("div",null,E.default.createElement(P.default,{geo:a,click:this.mapClick,activeRegion:this.state.activeRegion,activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,childGeo:n}))}},{key:"setActiveCategory",value:function(e){this.setState({activeCategory:e})}},{key:"setActiveAnalysis",value:function(e,t){var a=t||"activeAnalysis";"activeAnalysis"===a&&(window.x=1,this.props.router.push("/womeningov/iii/data/2016/"+e));var n={};n[a]=e,this.setState(n)}},{key:"render",value:function(){return E.default.createElement("div",{className:"container-fluid text-center DataExplorer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-3 hidden-print"},E.default.createElement(x.default,{categories:(0,o.default)(S),activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,categoryClick:this.setActiveCategory,analyses:M,analysisClick:this.setActiveAnalysis}),E.default.createElement("a",{onClick:l},E.default.createElement("div",{className:"row",style:{backgroundColor:"#fff",border:"1px solid white",paddingTop:3,marginBottom:10}},E.default.createElement("div",{className:"col-md-2",style:{textAlign:"center"}},E.default.createElement("div",{style:{width:"100%",paddingBottom:2,paddingTop:0}},E.default.createElement("img",{className:"img-fluid",src:"/womeningov/iii/img/doc_thumb.png"}))),E.default.createElement("div",{className:"col-md-9"},E.default.createElement("h4",{style:{color:"#111",paddingTop:8,fontSize:20}}," Download Report as PDF"))))),E.default.createElement("div",{className:"col-md-9 sidebar DataViewer",id:"DataViewer",style:{overflow:"hidden"}},this.renderLegend(I),this.renderMap(),this.dataTable())))}}]),t}(E.default.Component);W.propTypes={params:E.default.PropTypes.object.isRequired,loadAnalyses:E.default.PropTypes.func.isRequired,analyses_2016:E.default.PropTypes.object.isRequired};var V=function(e){return{analyses_2016:e.analysis}};t.default=(0,k.connect)(V,{loadAnalyses:R.loadAnalyses})((0,N.withRouter)(W))},214:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("DataViewer"),t=[],a=[],n=e.querySelectorAll("#mapSVG");n.forEach(function(e){var n=e.parentNode,i=e.innerHTML;console.log(e.width.baseVal.value,e.height.baseVal.value);var l=new Image,s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+e.width.baseVal.value+'" height="'+e.height.baseVal.value+'">';l.src="data:image/svg+xml,"+escape(s+i+"</svg>"),n.appendChild(l),e.style.display="none",document.getElementById("toolTipDiv").style.display="none",t.push(l),a.push(e),l.onload=function(){l.onload=function(){};var e=document.createElement("canvas");console.log("lading ",l.width,l.height),e.width=l.width,e.height=l.height;var t=e.getContext("2d");t.drawImage(l,0,0),l.src=e.toDataURL()}});window.scrollTo(0,0),(0,O.default)(e,{allowTaint:!0,onrendered:function(n){
//! MAKE YOUR PDF
var i=new jsPDF("p","pt","letter"),l=1.2*e.clientWidth,s=1400;console.log("export",e.clientHeight," > ",s);for(var o=0;o<=e.clientHeight/s;o++){
//! This is all just html2canvas stuff
var r=n,c=0,d=s*o,u=l,f=s,v=0,m=0,g=l,p=s;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",l),onePageCanvas.setAttribute("height",s);var y=onePageCanvas.getContext("2d");y.drawImage(r,c,d,u,f,v,m,g,p);var h=onePageCanvas.toDataURL("image/png",1),E=onePageCanvas.width,b=onePageCanvas.clientHeight;
//! If we're on anything other than the first page,
o>0&&i.addPage(612,791),
//! now we declare that we're working on that page
i.setPage(o+1),
//! now we add content to that page!
i.addImage(h,"PNG",10,10,E*(700/E),.32*b)}
//! after the for loop is finished running, we save the pdf.
i.save("immigration_index.pdf"),a.forEach(function(e){e.style.display="block"}),t.forEach(function(e){e.style.display="none"}),document.getElementById("toolTipDiv").style.display="block"}})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(18),o=i(s),r=a(7),c=i(r),d=a(8),u=i(d),f=a(9),v=i(f),m=a(11),g=i(m),p=a(10),y=i(p),h=a(1),E=i(h),b=a(23),A=n(b),w=a(37),C=n(w),k=a(35),N=a(21),R=a(53),_=a(51),P=i(_),L=a(52),x=i(L),B=a(50),F=(i(B),a(61)),T=i(F),D=a(60),O=i(D);a(58);var S={Overall:{name:"Overall",desc:"Aggregated score for all categories.",type:"activeCategory"},"Full Time":{name:"Full-Time Employment",desc:"Percentage of full time workers who were employed full time during the last 12 months (25-64 years old)",type:"activeCategory"},Poverty:{name:"Poverty",desc:"Percentage of residents whose household income fell below 150% of federal poverty line (25-64 years old)",type:"activeCategory"},"Working Poor":{name:"Working Poor",desc:"Percentage of full time workers with income to poverty ratio lower than or equal to 150% of federal poverty line (25-64 years old)",type:"activeCategory"},Homeownership:{name:"Homeownership",desc:"Percentage of residents who own their own homes (25-64 years old)",type:"activeCategory"},"Rent Burden":{name:"Rent Burden",desc:"Percentage of residents who spent 50% or more of their income on rent. (25-64 years old)",type:"activeCategory"},Unemployment:{name:"Unemployment",desc:"Percentage of workers who are unemployed (25-64 years old)",type:"activeCategory"},Income:{name:"Income Level for Full-Time Workers",desc:"Income level of full time workers during the last 12 months (25-64 years old)",type:"activeCategory"}},G=["Ratio","Rank","Grade"],H={babs:{name:"Bachelor’s Degree or More",desc:"Holds Bachelor’s degree or better; speaks English well.",type:"educationLevel",subcats:S},hs:{name:"High School Diploma / Some College",desc:"Has High School diploma or some college; speaks English well.",type:"educationLevel",subcats:S}},M={nativity:{name:"The Effects of Nativity Status",info:"Effects of nativity status on economic outcomes of foreign-Born New Yorkers.",type:"activeAnalysis",subcats:{nativity:{name:"Foreign-Born and Native-Born",type:"activeAnalysis",subcats:H},nativity_women:{name:"Foreign-Born Women and Native-Born Women",type:"activeAnalysis",subcats:H}}},race:{name:"The Effects of Race",info:"Effects of nativity status and race on economic outcomes of foreign-born New Yorkers.",subcats:{race:{name:"Foreign-Born people of color and Native-Born non-hispanic white",type:"activeAnalysis",subcats:H},race_women:{name:"Foreign-Born Women of color and Native-born non-hispanic white women",type:"activeAnalysis",subcats:H}}},gender:{name:"The Effects of Gender",info:"Effects of nativity status on economic outcomes of foreign-born women.",heading:"Foreign Born Women and Foreign Born Men",subcats:H},vulnerable:{name:"The Effects of Low English Proficiency and Educational Attainment",info:"Measures economic outcomes for the foreign-born with no high school diploma and low English proficiency.",heading:"Foreign-born with no high school diploma and low English proficiency",subcats:S}},j=["rgb(5,48,97)","rgb(33,102,172)","rgb(67,147,195)","rgb(146,197,222)","rgb(209,229,240)","rgb(253,219,199)","rgb(244,165,130)","rgb(214,96,77)","rgb(178,24,43)","rgb(103,0,31)"],I=A.scaleOrdinal().domain(["A","A-","B","B-","C","C-","D","D-","E"]).range(j),W=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.setActiveYear=function(e){},a.state={puma_data:[],activeCategory:(0,o.default)(S)[0],activeAnalysis:a.props.params.type||"nativity",activeYear:"2017",educationLevel:"babs",activeRegions:null,geoData:null,childGeo:null,regionGeo:null,display:"map"},a.setActiveCategory=a.setActiveCategory.bind(a),a.setActiveAnalysis=a.setActiveAnalysis.bind(a),a.setActiveYear=a.setActiveYear.bind(a),a.educationClick=a.educationClick.bind(a),a.mapClick=a.mapClick.bind(a),a.renderLegend=a.renderLegend.bind(a),a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.json("/womeningov/iii/geo/ny_puma_geo.json",function(t,a){console.log("geodata"),t&&console.log("error",t);var n={type:"FeatureCollection",features:[]};n.features=(0,o.default)(T.default).map(function(e){return{type:"Feature",properties:{region:e,geoType:"region"},geometry:C.merge(a,a.objects.collection.geometries.filter(function(t){return T.default[e].indexOf(t.properties.NAMELSAD10)!==-1}))}}),e.setState({geoData:a,childGeo:C.feature(a,a.objects.collection),regionGeo:n})})}},{key:"componentWillReceiveProps",value:function(e){e.params.type&&e.params.type!==this.state.activeAnalysis&&this.setState({activeAnalysis:e.params.type})}},{key:"numberFormat",value:function(e){return e&&e.indexOf("#")===-1?e.indexOf("%")!==-1?e:(+e).toFixed(2):"N/A"}},{key:"gradeFormat",value:function(e){return e&&e.indexOf("#")===-1?e:"N/A"}},{key:"dataTable",value:function(){var e=this;if(!this.props.analyses[this.state.activeAnalysis]||!this.props.analyses[this.state.activeAnalysis][this.state.educationLevel])return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,this.state.activeYear),E.default.createElement("span",null);var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a=this.state.activeRegion&&T.default[this.state.activeRegion]?T.default[this.state.activeRegion]:(0,o.default)(T.default),n=(0,o.default)(t).filter(function(e){return a.indexOf(e)!==-1}).sort(function(a,n){return t[a][e.state.activeCategory].Rank-t[n][e.state.activeCategory].Rank}).map(function(a,n){return E.default.createElement("tr",{key:a},E.default.createElement("td",null,a),"Overall"===e.state.activeCategory?null:E.default.createElement("td",null,e.numberFormat(t[a][e.state.activeCategory].Ratio)),E.default.createElement("td",null,e.state.activeRegion?t[a][e.state.activeCategory].Rank:"N/A"==e.gradeFormat(t[a][e.state.activeCategory].Grade)?"N/A":n+1),E.default.createElement("td",null,e.gradeFormat(t[a][e.state.activeCategory].Grade)))});return E.default.createElement("div",{style:{padding:10}},E.default.createElement("div",{className:"col-md-12",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic"):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading):E.default.createElement("strong",null,M[this.state.activeAnalysis]?M[this.state.activeAnalysis].heading:""),"vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null," | "," ",E.default.createElement("strong",null,H[this.state.educationLevel].name)," | "+H[this.state.educationLevel].desc):""),E.default.createElement("table",{className:"table table-hover",style:{backgroundColor:"#fff",marginTop:40}},E.default.createElement("thead",null,E.default.createElement("tr",null,E.default.createElement("th",null,"Region"),G.filter(function(t){return!("Overall"===e.state.activeCategory&&"Ratio"===t)}).map(function(e){return E.default.createElement("th",{key:e},e)}))),E.default.createElement("tbody",null,n)))}},{key:"educationClick",value:function(e){e!==this.state.educationLevel&&this.setState({display:e})}},{key:"renderLegend",value:function(e){var t=this,a=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{backgroundColor:e(t),width:100/e.domain().length+"%",height:20}})}),n=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{textAlign:"center",width:100/e.domain().length+"%",height:20}},t)});(0,o.default)(S).map(function(e){var a=e===t.state.activeCategory?"catbutton active":"catbutton";return E.default.createElement("div",{className:"catDiv",key:e},E.default.createElement("div",{onClick:t.setActiveCategory.bind(null,e)},E.default.createElement("div",{className:a},E.default.createElement("p",{className:"catContent"},e))))});return E.default.createElement("div",{className:"legendContainer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-5",style:{backgroundColor:"#efefef",minHeight:171,borderRadius:5,padding:10}},E.default.createElement("h5",null,S[this.state.activeCategory].name,E.default.createElement("span",{style:{float:"right"}},this.state.activeRegion)),E.default.createElement("br",null),E.default.createElement("div",{style:{marginTop:-15}},E.default.createElement("div",{className:"legendRow"},a),E.default.createElement("div",{className:"legendRow"},n)),S[this.state.activeCategory].desc),E.default.createElement("div",{className:"col-md-1"}),E.default.createElement("div",{className:"col-md-6",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic",E.default.createElement("br",null)):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"",M[this.state.activeAnalysis]&&M[this.state.activeAnalysis].heading?E.default.createElement("strong",null,M[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"","vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null,E.default.createElement("strong",null,H[this.state.educationLevel].name,E.default.createElement("br",null)),H[this.state.educationLevel].desc):"")))}},{key:"renderMapTableButtons",value:function(){var e="catbutton";e+="map"===this.state.display?" active":"";var t="catbutton";return t+="table"===this.state.display?" active":"",E.default.createElement("div",{className:"catButtons",style:{float:"right"}},E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"map")},E.default.createElement("div",{className:e},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Map")))),E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"table")},E.default.createElement("div",{className:t},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Table")))))}},{key:"mapClick",value:function(e){var t=null;A.selectAll(".mapActive").classed("mapActive",!1),this.state.activeRegion===e.properties.region?(t=null,A.selectAll(".mapActive").classed("mapActive",!1)):"region"===e.properties.geoType&&(t=e.properties.region,A.selectAll(".region").sort(function(e){return e.properties.region===t?1:0}),A.select("."+e.properties.region.split(" ").join("_")).classed("mapActive",!0)),this.setState({activeRegion:t})}},{key:"renderMap",value:function(){var e=this;if(1===window.x&&(window.x=2,this.props.router.push("/womeningov/iii/data/2017/"+this.state.activeAnalysis)),!(this.props.analyses[this.state.activeAnalysis]&&this.props.analyses[this.state.activeAnalysis][this.state.educationLevel]&&this.state.childGeo&&this.state.regionGeo))return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,"2017"),E.default.createElement("div",{style:{minHeight:"100vh"}}," Loading ... ",(0,o.default)(this.props.analyses));var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a={type:"FeatureCollection",features:[]};a.features=this.state.regionGeo.features.sort(function(a,n){return t[a.properties.region][e.state.activeCategory].Rank-t[n.properties.region][e.state.activeCategory].Rank}).map(function(a,n){var i=t[a.properties.region]&&t[a.properties.region][e.state.activeCategory]&&t[a.properties.region][e.state.activeCategory].Grade?t[a.properties.region][e.state.activeCategory].Grade:"E";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank="N/A"==e.gradeFormat(i)?"N/A":n+1,a});var n={type:"FeatureCollection",features:[]};return this.state.activeRegion&&(n.features=this.state.childGeo.features.filter(function(t){return T.default[e.state.activeRegion]&&T.default[e.state.activeRegion].includes(t.properties.NAMELSAD10)}).map(function(a){var n=a.properties.NAMELSAD10,i=t[n]&&t[n][e.state.activeCategory]&&t[n][e.state.activeCategory].Grade?t[n][e.state.activeCategory].Grade:"E-";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank=t[n][e.state.activeCategory].Rank,a.properties.geoType="puma",a.properties.region=n,a})),E.default.createElement("div",null,E.default.createElement(P.default,{geo:a,click:this.mapClick,activeRegion:this.state.activeRegion,activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,childGeo:n}))}},{key:"setActiveCategory",value:function(e){this.setState({activeCategory:e})}},{key:"setActiveAnalysis",value:function(e,t){var a=t||"activeAnalysis";"activeAnalysis"===a&&(window.x=1,this.props.router.push("/womeningov/iii/data/2017/"+e));var n={};n[a]=e,this.setState(n)}},{key:"render",value:function(){return E.default.createElement("div",{className:"container-fluid text-center DataExplorer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-3 hidden-print"},E.default.createElement(x.default,{categories:(0,o.default)(S),activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,categoryClick:this.setActiveCategory,analyses:M,analysisClick:this.setActiveAnalysis}),E.default.createElement("a",{onClick:l},E.default.createElement("div",{className:"row",style:{backgroundColor:"#fff",border:"1px solid white",paddingTop:3,marginBottom:10}},E.default.createElement("div",{className:"col-md-2",style:{textAlign:"center"}},E.default.createElement("div",{style:{width:"100%",paddingBottom:2,paddingTop:0}},E.default.createElement("img",{className:"img-fluid",src:"/womeningov/iii/img/doc_thumb.png"}))),E.default.createElement("div",{className:"col-md-9"},E.default.createElement("h4",{style:{color:"#111",paddingTop:8,fontSize:20}}," Download Report as PDF"))))),E.default.createElement("div",{className:"col-md-9 sidebar DataViewer",id:"DataViewer",style:{overflow:"hidden"}},this.renderLegend(I),this.renderMap(),this.dataTable())))}}]),t}(E.default.Component);W.propTypes={params:E.default.PropTypes.object.isRequired,loadAnalyses:E.default.PropTypes.func.isRequired,analyses:E.default.PropTypes.object.isRequired};var V=function(e){return{analyses:e.analysis}};t.default=(0,k.connect)(V,{loadAnalyses:R.loadAnalyses})((0,N.withRouter)(W))},215:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("DataViewer"),t=[],a=[],n=e.querySelectorAll("#mapSVG");n.forEach(function(e){var n=e.parentNode,i=e.innerHTML;console.log(e.width.baseVal.value,e.height.baseVal.value);var l=new Image,s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+e.width.baseVal.value+'" height="'+e.height.baseVal.value+'">';l.src="data:image/svg+xml,"+escape(s+i+"</svg>"),n.appendChild(l),e.style.display="none",document.getElementById("toolTipDiv").style.display="none",t.push(l),a.push(e),l.onload=function(){l.onload=function(){};var e=document.createElement("canvas");console.log("lading ",l.width,l.height),e.width=l.width,e.height=l.height;var t=e.getContext("2d");t.drawImage(l,0,0),l.src=e.toDataURL()}});window.scrollTo(0,0),(0,O.default)(e,{allowTaint:!0,onrendered:function(n){
//! MAKE YOUR PDF
var i=new jsPDF("p","pt","letter"),l=1.2*e.clientWidth,s=1400;console.log("export",e.clientHeight," > ",s);for(var o=0;o<=e.clientHeight/s;o++){
//! This is all just html2canvas stuff
var r=n,c=0,d=s*o,u=l,f=s,v=0,m=0,g=l,p=s;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",l),onePageCanvas.setAttribute("height",s);var y=onePageCanvas.getContext("2d");y.drawImage(r,c,d,u,f,v,m,g,p);var h=onePageCanvas.toDataURL("image/png",1),E=onePageCanvas.width,b=onePageCanvas.clientHeight;
//! If we're on anything other than the first page,
o>0&&i.addPage(612,791),
//! now we declare that we're working on that page
i.setPage(o+1),
//! now we add content to that page!
i.addImage(h,"PNG",10,10,E*(700/E),.32*b)}
//! after the for loop is finished running, we save the pdf.
i.save("immigration_index.pdf"),a.forEach(function(e){e.style.display="block"}),t.forEach(function(e){e.style.display="none"}),document.getElementById("toolTipDiv").style.display="block"}})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(18),o=i(s),r=a(7),c=i(r),d=a(8),u=i(d),f=a(9),v=i(f),m=a(11),g=i(m),p=a(10),y=i(p),h=a(1),E=i(h),b=a(23),A=n(b),w=a(37),C=n(w),k=a(35),N=a(21),R=a(53),_=a(51),P=i(_),L=a(52),x=i(L),B=a(50),F=(i(B),a(61)),T=i(F),D=a(60),O=i(D);a(58);var S={Overall:{name:"Overall",desc:"Aggregated score for all categories.",type:"activeCategory"},"Full Time":{name:"Full-Time Employment",desc:"Percentage of full time workers who were employed full time during the last 12 months (25-64 years old)",type:"activeCategory"},Poverty:{name:"Poverty",desc:"Percentage of residents whose household income fell below 150% of federal poverty line (25-64 years old)",type:"activeCategory"},"Working Poor":{name:"Working Poor",desc:"Percentage of full time workers with income to poverty ratio lower than or equal to 150% of federal poverty line (25-64 years old)",type:"activeCategory"},Homeownership:{name:"Homeownership",desc:"Percentage of residents who own their own homes (25-64 years old)",type:"activeCategory"},"Rent Burden":{name:"Rent Burden",desc:"Percentage of residents who spent 50% or more of their income on rent. (25-64 years old)",type:"activeCategory"},Unemployment:{name:"Unemployment",desc:"Percentage of workers who are unemployed (25-64 years old)",type:"activeCategory"},Income:{name:"Income Level for Full-Time Workers",desc:"Income level of full time workers during the last 12 months (25-64 years old)",type:"activeCategory"}},G=["Ratio","Rank","Grade"],H={babs:{name:"Bachelor’s Degree or More",desc:"Holds Bachelor’s degree or better; speaks English well.",type:"educationLevel",subcats:S},hs:{name:"High School Diploma / Some College",desc:"Has High School diploma or some college; speaks English well.",type:"educationLevel",subcats:S}},M={nativity:{name:"The Effects of Nativity Status",info:"Effects of nativity status on economic outcomes of foreign-Born New Yorkers.",type:"activeAnalysis",subcats:{nativity:{name:"Foreign-Born Hispanic and Native-Born Hispanic",type:"activeAnalysis",subcats:H}}},race:{name:"The Effects of Race",info:"Effects of nativity status and race on economic outcomes of foreign-born New Yorkers.",subcats:{race:{name:"Foreign-Born Hispanic people of color and Foreign-Born white Hispanic",type:"activeAnalysis",subcats:H}}},gender:{name:"The Effects of Gender",info:"Effects of nativity status on economic outcomes of foreign-born women.",heading:"Foreign Born Hispanic Women and Foreign Born Hispanic Men",subcats:H}},j=["rgb(5,48,97)","rgb(33,102,172)","rgb(67,147,195)","rgb(146,197,222)","rgb(209,229,240)","rgb(253,219,199)","rgb(244,165,130)","rgb(214,96,77)","rgb(178,24,43)","rgb(103,0,31)"],I=A.scaleOrdinal().domain(["A","A-","B","B-","C","C-","D","D-","E"]).range(j),W=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.setActiveYear=function(e){},a.state={puma_data:[],activeCategory:(0,o.default)(S)[0],activeAnalysis:a.props.params.type||"nativity",activeYear:"HISP_2016",educationLevel:"babs",activeRegions:null,geoData:null,childGeo:null,regionGeo:null,display:"map"},a.setActiveCategory=a.setActiveCategory.bind(a),a.setActiveAnalysis=a.setActiveAnalysis.bind(a),a.setActiveYear=a.setActiveYear.bind(a),a.educationClick=a.educationClick.bind(a),a.mapClick=a.mapClick.bind(a),a.renderLegend=a.renderLegend.bind(a),a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.json("/womeningov/iii/geo/ny_puma_geo.json",function(t,a){console.log("geodata"),t&&console.log("error",t);var n={type:"FeatureCollection",features:[]};n.features=(0,o.default)(T.default).map(function(e){return{type:"Feature",properties:{region:e,geoType:"region"},geometry:C.merge(a,a.objects.collection.geometries.filter(function(t){return T.default[e].indexOf(t.properties.NAMELSAD10)!==-1}))}}),e.setState({geoData:a,childGeo:C.feature(a,a.objects.collection),regionGeo:n})})}},{key:"componentWillReceiveProps",value:function(e){e.params.type&&e.params.type!==this.state.activeAnalysis&&this.setState({activeAnalysis:e.params.type})}},{key:"numberFormat",value:function(e){return e&&e.indexOf("#")===-1?e.indexOf("%")!==-1?e:(+e).toFixed(2):"N/A"}},{key:"gradeFormat",value:function(e){return e&&e.indexOf("#")===-1?e:"N/A"}},{key:"dataTable",value:function(){var e=this;if(!this.props.analyses[this.state.activeAnalysis]||!this.props.analyses[this.state.activeAnalysis][this.state.educationLevel])return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,this.state.activeYear),E.default.createElement("span",null);var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a=this.state.activeRegion&&T.default[this.state.activeRegion]?T.default[this.state.activeRegion]:(0,o.default)(T.default),n=(0,o.default)(t).filter(function(e){return a.indexOf(e)!==-1}).sort(function(a,n){return t[a][e.state.activeCategory].Rank-t[n][e.state.activeCategory].Rank}).map(function(a,n){return E.default.createElement("tr",{key:a},E.default.createElement("td",null,a),"Overall"===e.state.activeCategory?null:E.default.createElement("td",null,e.numberFormat(t[a][e.state.activeCategory].Ratio)),E.default.createElement("td",null,e.state.activeRegion?t[a][e.state.activeCategory].Rank:"N/A"==e.gradeFormat(t[a][e.state.activeCategory].Grade)?"N/A":n+1),E.default.createElement("td",null,e.gradeFormat(t[a][e.state.activeCategory].Grade)))});return E.default.createElement("div",{style:{padding:10}},E.default.createElement("div",{className:"col-md-12",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic"):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading):E.default.createElement("strong",null,M[this.state.activeAnalysis]?M[this.state.activeAnalysis].heading:""),"vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null," | "," ",E.default.createElement("strong",null,H[this.state.educationLevel].name)," | "+H[this.state.educationLevel].desc):""),E.default.createElement("table",{className:"table table-hover",style:{backgroundColor:"#fff",marginTop:40}},E.default.createElement("thead",null,E.default.createElement("tr",null,E.default.createElement("th",null,"Region"),G.filter(function(t){return!("Overall"===e.state.activeCategory&&"Ratio"===t)}).map(function(e){return E.default.createElement("th",{key:e},e)}))),E.default.createElement("tbody",null,n)))}},{key:"educationClick",value:function(e){e!==this.state.educationLevel&&this.setState({display:e})}},{key:"renderLegend",value:function(e){var t=this,a=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{backgroundColor:e(t),width:100/e.domain().length+"%",height:20}})}),n=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{textAlign:"center",width:100/e.domain().length+"%",height:20}},t)});(0,o.default)(S).map(function(e){var a=e===t.state.activeCategory?"catbutton active":"catbutton";return E.default.createElement("div",{className:"catDiv",key:e},E.default.createElement("div",{onClick:t.setActiveCategory.bind(null,e)},E.default.createElement("div",{className:a},E.default.createElement("p",{className:"catContent"},e))))});return E.default.createElement("div",{className:"legendContainer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-5",style:{backgroundColor:"#efefef",minHeight:171,borderRadius:5,padding:10}},E.default.createElement("h5",null,S[this.state.activeCategory].name,E.default.createElement("span",{style:{float:"right"}},this.state.activeRegion)),E.default.createElement("br",null),E.default.createElement("div",{style:{marginTop:-15}},E.default.createElement("div",{className:"legendRow"},a),E.default.createElement("div",{className:"legendRow"},n)),S[this.state.activeCategory].desc),E.default.createElement("div",{className:"col-md-1"}),E.default.createElement("div",{className:"col-md-6",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic",E.default.createElement("br",null)):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"",M[this.state.activeAnalysis]&&M[this.state.activeAnalysis].heading?E.default.createElement("strong",null,M[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"","vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null,E.default.createElement("strong",null,H[this.state.educationLevel].name,E.default.createElement("br",null)),H[this.state.educationLevel].desc):"")))}},{key:"renderMapTableButtons",value:function(){var e="catbutton";e+="map"===this.state.display?" active":"";var t="catbutton";return t+="table"===this.state.display?" active":"",E.default.createElement("div",{className:"catButtons",style:{float:"right"}},E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"map")},E.default.createElement("div",{className:e},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Map")))),E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"table")},E.default.createElement("div",{className:t},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Table")))))}},{key:"mapClick",value:function(e){var t=null;A.selectAll(".mapActive").classed("mapActive",!1),this.state.activeRegion===e.properties.region?(t=null,A.selectAll(".mapActive").classed("mapActive",!1)):"region"===e.properties.geoType&&(t=e.properties.region,A.selectAll(".region").sort(function(e){return e.properties.region===t?1:0}),A.select("."+e.properties.region.split(" ").join("_")).classed("mapActive",!0)),this.setState({activeRegion:t})}},{key:"renderMap",value:function(){var e=this;if(1===window.x&&(window.x=2,this.props.router.push("/womeningov/iii/data/HISP_2016/"+this.state.activeAnalysis)),!(this.props.analyses[this.state.activeAnalysis]&&this.props.analyses[this.state.activeAnalysis][this.state.educationLevel]&&this.state.childGeo&&this.state.regionGeo))return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,"HISP_2016"),E.default.createElement("div",{style:{minHeight:"100vh"}}," Loading ... ",(0,o.default)(this.props.analyses));var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a={type:"FeatureCollection",features:[]};a.features=this.state.regionGeo.features.sort(function(a,n){return t[a.properties.region][e.state.activeCategory].Rank-t[n.properties.region][e.state.activeCategory].Rank}).map(function(a,n){var i=t[a.properties.region]&&t[a.properties.region][e.state.activeCategory]&&t[a.properties.region][e.state.activeCategory].Grade?t[a.properties.region][e.state.activeCategory].Grade:"E";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank="N/A"==e.gradeFormat(i)?"N/A":n+1,a});var n={type:"FeatureCollection",features:[]};return this.state.activeRegion&&(n.features=this.state.childGeo.features.filter(function(t){return T.default[e.state.activeRegion]&&T.default[e.state.activeRegion].includes(t.properties.NAMELSAD10)}).map(function(a){var n=a.properties.NAMELSAD10,i=t[n]&&t[n][e.state.activeCategory]&&t[n][e.state.activeCategory].Grade?t[n][e.state.activeCategory].Grade:"E-";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank=t[n][e.state.activeCategory].Rank,a.properties.geoType="puma",a.properties.region=n,a})),E.default.createElement("div",null,E.default.createElement(P.default,{geo:a,click:this.mapClick,activeRegion:this.state.activeRegion,activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,childGeo:n}))}},{key:"setActiveCategory",value:function(e){this.setState({activeCategory:e})}},{key:"setActiveAnalysis",value:function(e,t){var a=t||"activeAnalysis";"activeAnalysis"===a&&(window.x=1,this.props.router.push("/womeningov/iii/data/HISP_2016/"+e));var n={};n[a]=e,this.setState(n)}},{key:"render",value:function(){return E.default.createElement("div",{className:"container-fluid text-center DataExplorer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-3 hidden-print"},E.default.createElement(x.default,{categories:(0,o.default)(S),activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,categoryClick:this.setActiveCategory,analyses:M,analysisClick:this.setActiveAnalysis}),E.default.createElement("a",{onClick:l},E.default.createElement("div",{className:"row",style:{backgroundColor:"#fff",border:"1px solid white",paddingTop:3,marginBottom:10}},E.default.createElement("div",{className:"col-md-2",style:{textAlign:"center"}},E.default.createElement("div",{style:{width:"100%",paddingBottom:2,paddingTop:0}},E.default.createElement("img",{className:"img-fluid",src:"/womeningov/iii/img/doc_thumb.png"}))),E.default.createElement("div",{className:"col-md-9"},E.default.createElement("h4",{style:{color:"#111",paddingTop:8,fontSize:20}}," Download Report as PDF"))))),E.default.createElement("div",{className:"col-md-9 sidebar DataViewer",id:"DataViewer",style:{overflow:"hidden"}},this.renderLegend(I),this.renderMap(),this.dataTable())))}}]),t}(E.default.Component);W.propTypes={params:E.default.PropTypes.object.isRequired,loadAnalyses:E.default.PropTypes.func.isRequired,analyses:E.default.PropTypes.object.isRequired};var V=function(e){return{analyses:e.analysis}};t.default=(0,k.connect)(V,{loadAnalyses:R.loadAnalyses})((0,N.withRouter)(W))},216:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("DataViewer"),t=[],a=[],n=e.querySelectorAll("#mapSVG");n.forEach(function(e){var n=e.parentNode,i=e.innerHTML;console.log(e.width.baseVal.value,e.height.baseVal.value);var l=new Image,s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+e.width.baseVal.value+'" height="'+e.height.baseVal.value+'">';l.src="data:image/svg+xml,"+escape(s+i+"</svg>"),n.appendChild(l),e.style.display="none",document.getElementById("toolTipDiv").style.display="none",t.push(l),a.push(e),l.onload=function(){l.onload=function(){};var e=document.createElement("canvas");console.log("lading ",l.width,l.height),e.width=l.width,e.height=l.height;var t=e.getContext("2d");t.drawImage(l,0,0),l.src=e.toDataURL()}});window.scrollTo(0,0),(0,O.default)(e,{allowTaint:!0,onrendered:function(n){
//! MAKE YOUR PDF
var i=new jsPDF("p","pt","letter"),l=1.2*e.clientWidth,s=1400;console.log("export",e.clientHeight," > ",s);for(var o=0;o<=e.clientHeight/s;o++){
//! This is all just html2canvas stuff
var r=n,c=0,d=s*o,u=l,f=s,v=0,m=0,g=l,p=s;window.onePageCanvas=document.createElement("canvas"),onePageCanvas.setAttribute("width",l),onePageCanvas.setAttribute("height",s);var y=onePageCanvas.getContext("2d");y.drawImage(r,c,d,u,f,v,m,g,p);var h=onePageCanvas.toDataURL("image/png",1),E=onePageCanvas.width,b=onePageCanvas.clientHeight;
//! If we're on anything other than the first page,
o>0&&i.addPage(612,791),
//! now we declare that we're working on that page
i.setPage(o+1),
//! now we add content to that page!
i.addImage(h,"PNG",10,10,E*(700/E),.32*b)}
//! after the for loop is finished running, we save the pdf.
i.save("immigration_index.pdf"),a.forEach(function(e){e.style.display="block"}),t.forEach(function(e){e.style.display="none"}),document.getElementById("toolTipDiv").style.display="block"}})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(18),o=i(s),r=a(7),c=i(r),d=a(8),u=i(d),f=a(9),v=i(f),m=a(11),g=i(m),p=a(10),y=i(p),h=a(1),E=i(h),b=a(23),A=n(b),w=a(37),C=n(w),k=a(35),N=a(21),R=a(53),_=a(51),P=i(_),L=a(52),x=i(L),B=a(50),F=(i(B),a(61)),T=i(F),D=a(60),O=i(D);a(58);var S={Overall:{name:"Overall",desc:"Aggregated score for all categories.",type:"activeCategory"},"Full Time":{name:"Full-Time Employment",desc:"Percentage of full time workers who were employed full time during the last 12 months (25-64 years old)",type:"activeCategory"},Poverty:{name:"Poverty",desc:"Percentage of residents whose household income fell below 150% of federal poverty line (25-64 years old)",type:"activeCategory"},"Working Poor":{name:"Working Poor",desc:"Percentage of full time workers with income to poverty ratio lower than or equal to 150% of federal poverty line (25-64 years old)",type:"activeCategory"},Homeownership:{name:"Homeownership",desc:"Percentage of residents who own their own homes (25-64 years old)",type:"activeCategory"},"Rent Burden":{name:"Rent Burden",desc:"Percentage of residents who spent 50% or more of their income on rent. (25-64 years old)",type:"activeCategory"},Unemployment:{name:"Unemployment",desc:"Percentage of workers who are unemployed (25-64 years old)",type:"activeCategory"},Income:{name:"Income Level for Full-Time Workers",desc:"Income level of full time workers during the last 12 months (25-64 years old)",type:"activeCategory"}},G=["Ratio","Rank","Grade"],H={babs:{name:"Bachelor’s Degree or More",desc:"Holds Bachelor’s degree or better; speaks English well.",type:"educationLevel",subcats:S},hs:{name:"High School Diploma / Some College",desc:"Has High School diploma or some college; speaks English well.",type:"educationLevel",subcats:S}},M={nativity:{name:"The Effects of Ethnicity",info:"Effects of nativity status on economic outcomes of foreign-Born New Yorkers.",type:"activeAnalysis",subcats:{nativity:{name:"Foreign-Born Hispanic and Native-Born Hispanic",type:"activeAnalysis",subcats:H}}},race:{name:"The Effects of Nativity on Hispanic Communities",info:"Effects of nativity status and race on economic outcomes of foreign-born New Yorkers.",subcats:{race:{name:"Foreign-Born Hispanic people of color and Foreign-Born white Hispanic",type:"activeAnalysis",subcats:H}}},gender:{name:"The Effects of Place of birth on Puerto Rican communities",info:"Effects of nativity status on economic outcomes of foreign-born women.",heading:"Foreign Born Hispanic Women and Foreign Born Hispanic Men",subcats:H}},j=["rgb(5,48,97)","rgb(33,102,172)","rgb(67,147,195)","rgb(146,197,222)","rgb(209,229,240)","rgb(253,219,199)","rgb(244,165,130)","rgb(214,96,77)","rgb(178,24,43)","rgb(103,0,31)"],I=A.scaleOrdinal().domain(["A","A-","B","B-","C","C-","D","D-","E"]).range(j),W=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.setActiveYear=function(e){},a.state={puma_data:[],activeCategory:(0,o.default)(S)[0],activeAnalysis:a.props.params.type||"nativity",activeYear:"PR_2016",educationLevel:"babs",activeRegions:null,geoData:null,childGeo:null,regionGeo:null,display:"map"},a.setActiveCategory=a.setActiveCategory.bind(a),a.setActiveAnalysis=a.setActiveAnalysis.bind(a),a.setActiveYear=a.setActiveYear.bind(a),a.educationClick=a.educationClick.bind(a),a.mapClick=a.mapClick.bind(a),a.renderLegend=a.renderLegend.bind(a),a}return(0,y.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this;A.json("/womeningov/iii//geo/ny_puma_geo.json",function(t,a){console.log("geodata"),t&&console.log("error",t);var n={type:"FeatureCollection",features:[]};n.features=(0,o.default)(T.default).map(function(e){return{type:"Feature",properties:{region:e,geoType:"region"},geometry:C.merge(a,a.objects.collection.geometries.filter(function(t){return T.default[e].indexOf(t.properties.NAMELSAD10)!==-1}))}}),e.setState({geoData:a,childGeo:C.feature(a,a.objects.collection),regionGeo:n})})}},{key:"componentWillReceiveProps",value:function(e){e.params.type&&e.params.type!==this.state.activeAnalysis&&this.setState({activeAnalysis:e.params.type})}},{key:"numberFormat",value:function(e){return e&&e.indexOf("#")===-1?e.indexOf("%")!==-1?e:(+e).toFixed(2):"N/A"}},{key:"gradeFormat",value:function(e){return e&&e.indexOf("#")===-1?e:"N/A"}},{key:"dataTable",value:function(){var e=this;if(!this.props.analyses[this.state.activeAnalysis]||!this.props.analyses[this.state.activeAnalysis][this.state.educationLevel])return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,this.state.activeYear),E.default.createElement("span",null);var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a=this.state.activeRegion&&T.default[this.state.activeRegion]?T.default[this.state.activeRegion]:(0,o.default)(T.default),n=(0,o.default)(t).filter(function(e){return a.indexOf(e)!==-1}).sort(function(a,n){return t[a][e.state.activeCategory].Rank-t[n][e.state.activeCategory].Rank}).map(function(a,n){return E.default.createElement("tr",{key:a},E.default.createElement("td",null,a),"Overall"===e.state.activeCategory?null:E.default.createElement("td",null,e.numberFormat(t[a][e.state.activeCategory].Ratio)),E.default.createElement("td",null,e.state.activeRegion?t[a][e.state.activeCategory].Rank:"N/A"==e.gradeFormat(t[a][e.state.activeCategory].Grade)?"N/A":n+1),E.default.createElement("td",null,e.gradeFormat(t[a][e.state.activeCategory].Grade)))});return E.default.createElement("div",{style:{padding:10}},E.default.createElement("div",{className:"col-md-12",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic"):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading):E.default.createElement("strong",null,M[this.state.activeAnalysis]?M[this.state.activeAnalysis].heading:""),"vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null," | "," ",E.default.createElement("strong",null,H[this.state.educationLevel].name)," | "+H[this.state.educationLevel].desc):""),E.default.createElement("table",{className:"table table-hover",style:{backgroundColor:"#fff",marginTop:40}},E.default.createElement("thead",null,E.default.createElement("tr",null,E.default.createElement("th",null,"Region"),G.filter(function(t){return!("Overall"===e.state.activeCategory&&"Ratio"===t)}).map(function(e){return E.default.createElement("th",{key:e},e)}))),E.default.createElement("tbody",null,n)))}},{key:"educationClick",value:function(e){e!==this.state.educationLevel&&this.setState({display:e})}},{key:"renderLegend",value:function(e){var t=this,a=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{backgroundColor:e(t),width:100/e.domain().length+"%",height:20}})}),n=e.domain().map(function(t){return E.default.createElement("div",{key:t,style:{textAlign:"center",width:100/e.domain().length+"%",height:20}},t)});(0,o.default)(S).map(function(e){var a=e===t.state.activeCategory?"catbutton active":"catbutton";return E.default.createElement("div",{className:"catDiv",key:e},E.default.createElement("div",{onClick:t.setActiveCategory.bind(null,e)},E.default.createElement("div",{className:a},E.default.createElement("p",{className:"catContent"},e))))});return E.default.createElement("div",{className:"legendContainer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-5",style:{backgroundColor:"#efefef",minHeight:171,borderRadius:5,padding:10}},E.default.createElement("h5",null,S[this.state.activeCategory].name,E.default.createElement("span",{style:{float:"right"}},this.state.activeRegion)),E.default.createElement("br",null),E.default.createElement("div",{style:{marginTop:-15}},E.default.createElement("div",{className:"legendRow"},a),E.default.createElement("div",{className:"legendRow"},n)),S[this.state.activeCategory].desc),E.default.createElement("div",{className:"col-md-1"}),E.default.createElement("div",{className:"col-md-6",style:{backgroundColor:"#efefef",borderRadius:5,padding:10}},E.default.createElement("h4",null,M[this.state.activeAnalysis.split("_")[0]].name),["race"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born people of color and Native Born white non-hispanic",E.default.createElement("br",null)):"",["race_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,"Foreign Born Women of color And Native Born Women white non-hispanic",E.default.createElement("br",null)):"",["nativity","nativity_women"].indexOf(this.state.activeAnalysis)!==-1?E.default.createElement("strong",null,M.nativity.subcats[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"",M[this.state.activeAnalysis]&&M[this.state.activeAnalysis].heading?E.default.createElement("strong",null,M[this.state.activeAnalysis].heading,E.default.createElement("br",null)):"","vulnerable"!==this.state.activeAnalysis?E.default.createElement("span",null,E.default.createElement("strong",null,H[this.state.educationLevel].name,E.default.createElement("br",null)),H[this.state.educationLevel].desc):"")))}},{key:"renderMapTableButtons",value:function(){var e="catbutton";e+="map"===this.state.display?" active":"";var t="catbutton";return t+="table"===this.state.display?" active":"",E.default.createElement("div",{className:"catButtons",style:{float:"right"}},E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"map")},E.default.createElement("div",{className:e},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Map")))),E.default.createElement("div",{className:"catDiv"},E.default.createElement("div",{onClick:this.educationClick.bind(null,"table")},E.default.createElement("div",{className:t},E.default.createElement("p",{className:"catContent",style:{fontSize:"0.7em"}},"Table")))))}},{key:"mapClick",value:function(e){var t=null;A.selectAll(".mapActive").classed("mapActive",!1),this.state.activeRegion===e.properties.region?(t=null,A.selectAll(".mapActive").classed("mapActive",!1)):"region"===e.properties.geoType&&(t=e.properties.region,A.selectAll(".region").sort(function(e){return e.properties.region===t?1:0}),A.select("."+e.properties.region.split(" ").join("_")).classed("mapActive",!0)),this.setState({activeRegion:t})}},{key:"renderMap",value:function(){var e=this;if(1===window.x&&(window.x=2,this.props.router.push("/womeningov/iii/data/PR_2012_2016/"+this.state.activeAnalysis)),!(this.props.analyses[this.state.activeAnalysis]&&this.props.analyses[this.state.activeAnalysis][this.state.educationLevel]&&this.state.childGeo&&this.state.regionGeo))return this.props.loadAnalyses(this.state.activeAnalysis,this.state.educationLevel,"PR_2016"),E.default.createElement("div",{style:{minHeight:"100vh"}}," Loading ... ",(0,o.default)(this.props.analyses));var t=this.props.analyses[this.state.activeAnalysis][this.state.educationLevel],a={type:"FeatureCollection",features:[]};a.features=this.state.regionGeo.features.sort(function(a,n){return t[a.properties.region][e.state.activeCategory].Rank-t[n.properties.region][e.state.activeCategory].Rank}).map(function(a,n){var i=t[a.properties.region]&&t[a.properties.region][e.state.activeCategory]&&t[a.properties.region][e.state.activeCategory].Grade?t[a.properties.region][e.state.activeCategory].Grade:"E";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank="N/A"==e.gradeFormat(i)?"N/A":n+1,a});var n={type:"FeatureCollection",features:[]};return this.state.activeRegion&&(n.features=this.state.childGeo.features.filter(function(t){return T.default[e.state.activeRegion]&&T.default[e.state.activeRegion].includes(t.properties.NAMELSAD10)}).map(function(a){var n=a.properties.NAMELSAD10,i=t[n]&&t[n][e.state.activeCategory]&&t[n][e.state.activeCategory].Grade?t[n][e.state.activeCategory].Grade:"E-";return a.properties.fillColor=i.includes("#")?"url(#crosshatch) #fff":I(i),a.properties.grade=e.gradeFormat(i),a.properties.rank=t[n][e.state.activeCategory].Rank,a.properties.geoType="puma",a.properties.region=n,a})),E.default.createElement("div",null,E.default.createElement(P.default,{geo:a,click:this.mapClick,activeRegion:this.state.activeRegion,activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,childGeo:n}))}},{key:"setActiveCategory",value:function(e){this.setState({activeCategory:e})}},{key:"setActiveAnalysis",value:function(e,t){var a=t||"activeAnalysis";"activeAnalysis"===a&&(window.x=1,this.props.router.push("/womeningov/iii/data/PR_2012_2016/"+e));var n={};n[a]=e,this.setState(n)}},{key:"render",value:function(){return E.default.createElement("div",{className:"container-fluid text-center DataExplorer"},E.default.createElement("div",{className:"row"},E.default.createElement("div",{className:"col-md-3 hidden-print"},E.default.createElement(x.default,{categories:(0,o.default)(S),activeCategory:this.state.activeCategory,activeAnalysis:this.state.activeAnalysis,educationLevel:this.state.educationLevel,categoryClick:this.setActiveCategory,analyses:M,analysisClick:this.setActiveAnalysis}),E.default.createElement("a",{onClick:l},E.default.createElement("div",{className:"row",style:{backgroundColor:"#fff",border:"1px solid white",paddingTop:3,marginBottom:10}},E.default.createElement("div",{className:"col-md-2",style:{textAlign:"center"}},E.default.createElement("div",{style:{width:"100%",paddingBottom:2,paddingTop:0}},E.default.createElement("img",{className:"img-fluid",src:"/womeningov/iii/img/doc_thumb.png"}))),E.default.createElement("div",{className:"col-md-9"},E.default.createElement("h4",{style:{color:"#111",paddingTop:8,fontSize:20}}," Download Report as PDF"))))),E.default.createElement("div",{className:"col-md-9 sidebar DataViewer",id:"DataViewer",style:{overflow:"hidden"}},this.renderLegend(I),this.renderMap(),this.dataTable())))}}]),t}(E.default.Component);W.propTypes={params:E.default.PropTypes.object.isRequired,loadAnalyses:E.default.PropTypes.func.isRequired,analyses:E.default.PropTypes.object.isRequired};var V=function(e){return{analyses:e.analysis}};t.default=(0,k.connect)(V,{loadAnalyses:R.loadAnalyses})((0,N.withRouter)(W))},220:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(235),s=i(l),o=a(18),r=i(o),c=a(7),d=i(c),u=a(8),f=i(u),v=a(9),m=i(v),g=a(11),p=i(g),y=a(10),h=i(y),E=a(1),b=i(E),A=a(23),w=n(A),C=a(37),k=(n(C),a(330)),N=(i(k),["Overall","Full Time","Poverty","Working Poor","Homeownership","Rent Burden","Unemployment","Income","Naturalization"]),R=["Ratio","Score","Grade"],_=function(e){function t(e){(0,f.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={puma_data:[]},a}return(0,h.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;w.csv("/csv_v2/group11.csv",function(t,a){t&&console.log("error",t),e.setState({puma_data:a})})}},{key:"joinData",value:function(e){if(e){var t=e.reduce(function(e,t){return t.Regions=t.Regions.replace("; New York"," ").replace(", New York"," ").trim()+" PUMA",e[t.Regions]=t,e},{}),a={};return(0,r.default)(t).forEach(function(e){var n={};N.forEach(function(a){n[a]={},(0,r.default)(t[e]).filter(function(e){return e.indexOf(a)!==-1}).map(function(i,l){var s="Overall"===a?l+1:l;n[a][R[s]]=t[e][i]})}),a[e]=n}),(0,s.default)(a)}}},{key:"render",value:function(){var e=this.joinData(this.state.puma_data);return b.default.createElement("div",{className:"container-fluid text-center"},e)}}]),t}(b.default.Component);t.default=_},234:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return{type:y,payload:a,analysis_type:e,education:t}}function l(e){var t=(0,f.default)(e).filter(function(e){return(0,f.default)(p.default).indexOf(e)!==-1}),a=(0,f.default)(e).filter(function(e){return!(0,f.default)(p.default).indexOf(e)!==-1&&e.indexOf("PUMA")!==-1}),n=function(t,a){return isNaN(+e[t][a].Score)?-4:+e[t][a].Score};return E.forEach(function(i){var l=t.sort(function(e,t){return n(t,i)-n(e,i)});l.forEach(function(t,a){e[t][i].Rank=a+1}),l=a.sort(function(e,t){return n(t,i)-n(e,i)}),l.forEach(function(t,a){var n=e[t][i].Score.indexOf("#")!==-1?"N/A":a+1;e[t][i].Rank=n})}),e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments[1],a=A[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.loadAnalyses=t.dataSources=t.RECIEVE_ANALYSIS=void 0;var o=a(85),r=n(o),c=a(84),d=n(c),u=a(18),f=n(u);t.receiveAnalysis=i,t.default=s;var v=a(162),m=n(v),g=a(163),p=n(g),y=t.RECIEVE_ANALYSIS="RECIEVE_ANALYSIS",h=t.dataSources={nativity:{babs:"group1.json",hs:"group2.json"},nativity_women:{babs:"group5.json",hs:"group6.json"},race:{babs:"group3.json",hs:"group4.json"},race_women:{babs:"group7.json",hs:"group8.json"},gender:{babs:"group9.json",hs:"group10.json"},vulnerable:{babs:"group11.json",hs:"group11.json"}},E=["Overall","Full Time","Poverty","Working Poor","Homeownership","Rent Burden","Unemployment","Income"],b=t.loadAnalyses=function(e,t,a){return function(a){return(0,m.default)("/womeningov/iii/2016/"+h[e][t]).then(function(e){return e.json()}).then(function(n){return a(i(e,t,n))})}},A=(t.actions={loadAnalyses:b},(0,r.default)({},y,function(e,t){var a=(0,d.default)({},e);a[t.analysis_type]||(a[t.analysis_type]={}),a[t.analysis_type][t.education]||(a[t.analysis_type][t.education]={});var n=l(t.payload);return console.log("results",n),a[t.analysis_type][t.education]=t.payload,a})),w={}},235:function(e,t,a){e.exports={default:a(242),__esModule:!0}},242:function(e,t,a){var n=a(15),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},330:61});